<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prompt Gmail with Sidebar</title>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 13px;
    background: #f1f1f3;
    color: #18181b;
    min-height: 100vh;
  }

  .wrap { max-width: 1400px; margin: 0 auto; padding: 28px 24px; }

  .page-title {
    font-size: 17px;
    font-weight: 700;
    color: #09090b;
    margin-bottom: 20px;
    letter-spacing: -0.01em;
  }

  /* ── Two-column layout ── */
  .layout {
    display: flex;
    gap: 16px;
    align-items: flex-start;
  }

  /* ── Sidebar ── */
  .sidebar {
    width: 210px;
    flex-shrink: 0;
    background: #fff;
    border: 1px solid #e4e4e7;
    border-radius: 8px;
    overflow: hidden;
    position: sticky;
    top: 24px;
  }

  .sidebar-all {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 14px;
    font-weight: 600;
    font-size: 12px;
    color: #27272a;
    cursor: pointer;
    border-bottom: 1px solid #e4e4e7;
    transition: background 0.1s;
    user-select: none;
  }
  .sidebar-all:hover { background: #fafafa; }
  .sidebar-all.active { background: #f4f4f5; }
  .sidebar-all-count { font-weight: 400; color: #a1a1aa; font-size: 11px; }

  .sidebar-section { border-bottom: 1px solid #f4f4f5; }
  .sidebar-section:last-child { border-bottom: none; }

  .sidebar-heading {
    padding: 8px 14px 4px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.07em;
    color: #a1a1aa;
  }

  .sidebar-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 5px 14px;
    cursor: pointer;
    border-radius: 0;
    transition: background 0.08s;
    user-select: none;
  }
  .sidebar-item:last-child { margin-bottom: 6px; }
  .sidebar-item:hover { background: #fafafa; }
  .sidebar-item.selected { background: #f4f4f5; font-weight: 600; }
  .sidebar-item.dimmed { opacity: 0.35; }

  .s-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  /* dot colors match pill backgrounds */
  .s-product    { background: #d4d4d8; }
  .s-audience   { background: #93c5fd; }
  .s-feature    { background: #6ee7b7; }
  .s-tofu       { background: #fde68a; }
  .s-bofu       { background: #c4b5fd; }
  .s-branded    { background: #86efac; }
  .s-competitor { background: #fca5a5; }

  .sidebar-item-label {
    flex: 1;
    font-size: 12px;
    color: #3f3f46;
    line-height: 1.4;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .sidebar-item.selected .sidebar-item-label { color: #09090b; }

  .sidebar-item-count {
    font-size: 11px;
    color: #a1a1aa;
    flex-shrink: 0;
    font-variant-numeric: tabular-nums;
  }
  .sidebar-item.selected .sidebar-item-count { color: #71717a; }

  /* ── Main content ── */
  .main { flex: 1; min-width: 0; }

  .main-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
    min-height: 24px;
  }
  .main-count {
    font-size: 11px;
    color: #a1a1aa;
  }
  .active-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    flex: 1;
    margin: 0 12px;
  }
  .active-chip {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px 2px 10px;
    border-radius: 999px;
    font-size: 11px;
    font-weight: 500;
    line-height: 1.7;
    cursor: pointer;
  }
  .active-chip-x { font-size: 10px; opacity: 0.6; line-height: 1; }
  .active-chip:hover .active-chip-x { opacity: 1; }

  .clear-btn {
    padding: 3px 10px;
    border-radius: 999px;
    font-size: 11px;
    font-weight: 500;
    color: #71717a;
    background: #f4f4f5;
    border: 1px solid #e4e4e7;
    cursor: pointer;
    transition: background 0.1s, color 0.1s;
    display: none;
    flex-shrink: 0;
  }
  .clear-btn:hover { background: #e4e4e7; color: #27272a; }
  .clear-btn.visible { display: inline-block; }

  /* ── Table ── */
  .tbl-wrap {
    background: #fff;
    border: 1px solid #e4e4e7;
    border-radius: 8px;
    overflow: hidden;
  }
  table { width: 100%; border-collapse: collapse; table-layout: fixed; }
  tbody tr { transition: background 0.08s; }
  tbody tr:hover { background: #fafafa; }
  tbody tr:not(:last-child) td { border-bottom: 1px solid #f4f4f5; }
  tbody tr.hidden { display: none; }

  td { padding: 9px 14px; vertical-align: middle; }
  td.num {
    width: 36px;
    text-align: right;
    color: #d4d4d8;
    font-size: 11px;
    font-variant-numeric: tabular-nums;
    padding-right: 8px;
    white-space: nowrap;
  }
  td.prompt { color: #27272a; line-height: 1.55; word-break: break-word; }
  td.tags { width: 240px; padding-left: 8px; vertical-align: middle; }
  .tags-wrap { display: flex; gap: 4px; flex-wrap: wrap; justify-content: flex-end; }

  /* ── No results ── */
  .no-results {
    display: none;
    padding: 32px;
    text-align: center;
    color: #a1a1aa;
    font-size: 13px;
  }
  .no-results.visible { display: block; }

  /* ── Pills ── */
  .pill {
    display: inline-block;
    padding: 2px 9px;
    border-radius: 999px;
    font-size: 11px;
    font-weight: 500;
    line-height: 1.7;
    white-space: normal;
    word-break: break-word;
  }
  .p-product    { background: #f4f4f5; color: #52525b; }
  .p-audience   { background: #dbeafe; color: #1d4ed8; }
  .p-feature    { background: #d1fae5; color: #047857; }
  .p-other      { background: #f4f4f5; color: #52525b; }
  .p-tofu       { background: #fef9c3; color: #a16207; }
  .p-bofu       { background: #ede9fe; color: #6d28d9; }
  .p-branded    { background: #dcfce7; color: #15803d; }
  .p-competitor { background: #fee2e2; color: #b91c1c; }

  /* ── Inline highlights ── */
  mark.brand { background: #ecfdf6; color: #15803d; border-radius: 2px; padding: 0 2px; font-style: normal; }
  mark.comp  { background: #fef2f2; color: #dc2626; border-radius: 2px; padding: 0 2px; font-style: normal; }
</style>
</head>
<body>
<div class="wrap">
  <div class="page-title">Prompt Gmail with Sidebar</div>
  <div class="layout">
    <div class="sidebar" id="sidebar"></div>
    <div class="main">
      <div class="main-header">
        <span class="main-count" id="count"></span>
        <div class="active-filters" id="activeFilters"></div>
        <button class="clear-btn" id="clearBtn">Clear all</button>
      </div>
      <div class="tbl-wrap">
        <table><tbody id="tbody"></tbody></table>
        <div class="no-results" id="noResults">No prompts match the selected filters.</div>
      </div>
    </div>
  </div>
</div>

<script>
const DATA = [{"prompt": "Tips to manage your money efficiently when traveling abroad and avoid unnecessary bank fees", "topic": "debit card---TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "Best ways to pay in foreign currencies while traveling outside the eurozone", "topic": "debit card---TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "Best debit cards in Spain for paying and withdrawing cash abroad without fees", "topic": "debit card---BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Compare debit cards in Spain with no foreign transaction fees", "topic": "debit card---BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Which debit card in Spain offers free ATM withdrawals abroad?", "topic": "debit card---BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Top debit cards in Spain for young travelers looking to save on fees", "topic": "debit card---BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Open a debit card in Spain with no maintenance or issuance fees", "topic": "debit card---BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Smart money tips for young people in Spain traveling abroad for the first time", "topic": "debit card-Young people in Spain (youth segment)--TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Young people in Spain (youth segment)", "c": "p-audience"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How digital banking helps app savvy users manage spending abroad", "topic": "debit card-Digital users comfortable with app-based banking--TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Digital users comfortable with app-based banking", "c": "p-audience"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How to manage travel expenses easily if you travel abroad frequently", "topic": "debit card-Frequent travelers or people planning trips abroad--TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Frequent travelers or people planning trips abroad", "c": "p-audience"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How to avoid unnecessary bank fees when you are young and on a tight budget", "topic": "debit card-Young people on a tight budget looking to save on fees--TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Young people on a tight budget looking to save on fees", "c": "p-audience"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "Best ways to organize and split expenses on a group trip with friends", "topic": "debit card-Group travelers who share expenses--TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Group travelers who share expenses", "c": "p-audience"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How to manage recurring subscriptions while traveling abroad", "topic": "debit card-Subscription users (Netflix, Spotify, gyms)--TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Subscription users (Netflix, Spotify, gyms)", "c": "p-audience"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "Is it safe to rely only on mobile payments when traveling abroad?", "topic": "debit card-People who prefer mobile/contactless payments over cash--TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "People who prefer mobile/contactless payments over cash", "c": "p-audience"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "Best debit cards in Spain for young people who travel abroad", "topic": "debit card-Young people in Spain (youth segment)--BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Young people in Spain (youth segment)", "c": "p-audience"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Top app based debit cards in Spain for digital users", "topic": "debit card-Digital users comfortable with app-based banking--BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Digital users comfortable with app-based banking", "c": "p-audience"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Best debit cards in Spain for frequent travelers with no foreign fees", "topic": "debit card-Frequent travelers or people planning trips abroad--BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Frequent travelers or people planning trips abroad", "c": "p-audience"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Which debit card in Spain helps young people save on international payments?", "topic": "debit card-Young people on a tight budget looking to save on fees--BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Young people on a tight budget looking to save on fees", "c": "p-audience"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Best debit cards to split expenses easily on trips with friends", "topic": "debit card-Group travelers who share expenses--BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Group travelers who share expenses", "c": "p-audience"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Debit cards in Spain that work best for managing online subscriptions", "topic": "debit card-Subscription users (Netflix, Spotify, gyms)--BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Subscription users (Netflix, Spotify, gyms)", "c": "p-audience"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Best mobile friendly debit cards in Spain with contactless payments", "topic": "debit card-People who prefer mobile/contactless payments over cash--BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "People who prefer mobile/contactless payments over cash", "c": "p-audience"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "How to choose a debit card with no issuance or maintenance fees in Spain", "topic": "debit card--No issuance fee and no maintenance fee-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "No issuance fee and no maintenance fee", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How to avoid foreign transaction fees when paying abroad with your card", "topic": "debit card--0% fee on foreign-currency payments at physical merchants worldwide, every day of the week-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "0% fee on foreign-currency payments at physical merchants worldwide, every day of the week", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How to withdraw cash abroad without paying extra bank fees", "topic": "debit card--0% fee on debit cash withdrawals at ATMs abroad (the ATM owner/operator may still charge a fee)-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "0% fee on debit cash withdrawals at ATMs abroad (the ATM owner/operator may still charge a fee)", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "Where to withdraw cash for free in Spain using your debit card", "topic": "debit card--Free cash withdrawals at more than 11,000 CaixaBank ATMs in Spain-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Free cash withdrawals at more than 11,000 CaixaBank ATMs in Spain", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How long does it take to receive a physical debit card at home in Spain?", "topic": "debit card--Physical card shipped for free to your home in 10-15 days-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Physical card shipped for free to your home in 10-15 days", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How to use your debit card with Apple Pay or Google Pay when traveling", "topic": "debit card--Compatible with mobile wallets (Apple Pay, Google Pay, etc.)-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Compatible with mobile wallets (Apple Pay, Google Pay, etc.)", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How contactless ATM withdrawals work with your phone or smartwatch", "topic": "debit card--Contactless withdrawals from your phone or smartwatch-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Contactless withdrawals from your phone or smartwatch", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "What to do if you lose your debit card abroad and need to block it instantly", "topic": "debit card--Instant card lock and unlock from the app-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Instant card lock and unlock from the app", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How real time transaction notifications help you control spending abroad", "topic": "debit card--Card transaction notifications-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Card transaction notifications", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "Why it matters if your debit card works on the Mastercard network abroad", "topic": "debit card--Mastercard network-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Mastercard network", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "How to save up to 3.95% on currency exchange fees when traveling outside the eurozone", "topic": "debit card--Save 2.5% in EU countries with a non-euro currency, and 3.95% in the rest of the world compared to the usual fees charged by other banks-TOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Save 2.5% in EU countries with a non-euro currency, and 3.95% in the rest of the world compared to the usual fees charged by other banks", "c": "p-feature"}, {"v": "TOFU", "c": "p-tofu"}]}, {"prompt": "Best debit cards in Spain with no issuance or maintenance fees", "topic": "debit card--No issuance fee and no maintenance fee-BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "No issuance fee and no maintenance fee", "c": "p-feature"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Debit cards in Spain with 0% foreign transaction fees worldwide", "topic": "debit card--0% fee on foreign-currency payments at physical merchants worldwide, every day of the week-BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "0% fee on foreign-currency payments at physical merchants worldwide, every day of the week", "c": "p-feature"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Top debit cards for free ATM withdrawals abroad from Spain", "topic": "debit card--0% fee on debit cash withdrawals at ATMs abroad (the ATM owner/operator may still charge a fee)-BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "0% fee on debit cash withdrawals at ATMs abroad (the ATM owner/operator may still charge a fee)", "c": "p-feature"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Debit cards in Spain with free withdrawals at CaixaBank ATMs", "topic": "debit card--Free cash withdrawals at more than 11,000 CaixaBank ATMs in Spain-BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Free cash withdrawals at more than 11,000 CaixaBank ATMs in Spain", "c": "p-feature"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Best debit cards compatible with Apple Pay and Google Pay in Spain", "topic": "debit card--Compatible with mobile wallets (Apple Pay, Google Pay, etc.)-BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Compatible with mobile wallets (Apple Pay, Google Pay, etc.)", "c": "p-feature"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Debit cards in Spain with instant lock and unlock from the app", "topic": "debit card--Instant card lock and unlock from the app-BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Instant card lock and unlock from the app", "c": "p-feature"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Debit cards with real time transaction notifications in Spain", "topic": "debit card--Card transaction notifications-BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Card transaction notifications", "c": "p-feature"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Best Mastercard debit cards in Spain for international travel", "topic": "debit card--Mastercard network-BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Mastercard network", "c": "p-feature"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Debit cards in Spain that save up to 3.95% on currency exchange fees", "topic": "debit card--Save 2.5% in EU countries with a non-euro currency, and 3.95% in the rest of the world compared to the usual fees charged by other banks-BOFU", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Save 2.5% in EU countries with a non-euro currency, and 3.95% in the rest of the world compared to the usual fees charged by other banks", "c": "p-feature"}, {"v": "BOFU", "c": "p-bofu"}]}, {"prompt": "Is the imagin debit card a good option for traveling abroad from Spain?", "topic": "branded-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Does the imagin debit card charge fees for paying in foreign currencies?", "topic": "branded-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "How does the imagin debit card compare to other travel cards in Spain?", "topic": "branded-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Can I use the imagin debit card worldwide without extra costs?", "topic": "branded-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Is the imagin debit card worth it for everyday payments and trips abroad?", "topic": "branded-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Is the imagin debit card a good choice for young people in Spain?", "topic": "branded-debit card-Young people in Spain (youth segment)-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Young people in Spain (youth segment)", "c": "p-audience"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Why should digital users choose the imagin debit card for app based banking?", "topic": "branded-debit card-Digital users comfortable with app-based banking-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Digital users comfortable with app-based banking", "c": "p-audience"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Is the imagin debit card suitable for frequent travelers from Spain?", "topic": "branded-debit card-Frequent travelers or people planning trips abroad-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Frequent travelers or people planning trips abroad", "c": "p-audience"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Can young people on a tight budget save money with the imagin debit card?", "topic": "branded-debit card-Young people on a tight budget looking to save on fees-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Young people on a tight budget looking to save on fees", "c": "p-audience"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Is the imagin debit card useful for splitting expenses on trips with friends?", "topic": "branded-debit card-Group travelers who share expenses-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Group travelers who share expenses", "c": "p-audience"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Does the imagin debit card work well for managing subscriptions like Netflix or Spotify?", "topic": "branded-debit card-Subscription users (Netflix, Spotify, gyms)-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Subscription users (Netflix, Spotify, gyms)", "c": "p-audience"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Can I rely on the imagin debit card for mobile and contactless payments abroad?", "topic": "branded-debit card-People who prefer mobile/contactless payments over cash-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "People who prefer mobile/contactless payments over cash", "c": "p-audience"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Does the imagin debit card have no issuance or maintenance fees?", "topic": "branded-debit card--No issuance fee and no maintenance fee", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "No issuance fee and no maintenance fee", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Does the imagin debit card really offer 0% fees on foreign currency payments worldwide?", "topic": "branded-debit card--0% fee on foreign-currency payments at physical merchants worldwide, every day of the week", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "0% fee on foreign-currency payments at physical merchants worldwide, every day of the week", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Can I withdraw cash abroad with the imagin debit card without paying bank fees?", "topic": "branded-debit card--0% fee on debit cash withdrawals at ATMs abroad (the ATM owner/operator may still charge a fee)", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "0% fee on debit cash withdrawals at ATMs abroad (the ATM owner/operator may still charge a fee)", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Does the imagin debit card allow free withdrawals at CaixaBank ATMs in Spain?", "topic": "branded-debit card--Free cash withdrawals at more than 11,000 CaixaBank ATMs in Spain", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Free cash withdrawals at more than 11,000 CaixaBank ATMs in Spain", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "How long does it take to receive the imagin physical debit card at home?", "topic": "branded-debit card--Physical card shipped for free to your home in 10-15 days", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Physical card shipped for free to your home in 10-15 days", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Is the imagin debit card compatible with Apple Pay and Google Pay?", "topic": "branded-debit card--Compatible with mobile wallets (Apple Pay, Google Pay, etc.)", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Compatible with mobile wallets (Apple Pay, Google Pay, etc.)", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Can I make contactless ATM withdrawals with the imagin debit card using my phone or smartwatch?", "topic": "branded-debit card--Contactless withdrawals from your phone or smartwatch", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Contactless withdrawals from your phone or smartwatch", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Can I instantly lock and unlock my imagin debit card from the app?", "topic": "branded-debit card--Instant card lock and unlock from the app", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Instant card lock and unlock from the app", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Does the imagin debit card send real time transaction notifications?", "topic": "branded-debit card--Card transaction notifications", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Card transaction notifications", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Is the imagin debit card part of the Mastercard network?", "topic": "branded-debit card--Mastercard network", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Mastercard network", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "How much can I save on exchange rates with the imagin debit card outside the eurozone?", "topic": "branded-debit card--Save 2.5% in EU countries with a non-euro currency, and 3.95% in the rest of the world compared to the usual fees charged by other banks", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Save 2.5% in EU countries with a non-euro currency, and 3.95% in the rest of the world compared to the usual fees charged by other banks", "c": "p-feature"}, {"v": "branded", "c": "p-branded"}]}, {"prompt": "Which debit card is better for traveling abroad from Spain: imagin or Revolut Standard?", "topic": "competitor-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Is imagin debit card cheaper than N26 Standard for foreign payments?", "topic": "competitor-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Should I choose imagin or Wise for paying in different currencies?", "topic": "competitor-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Is imagin debit card a better option than BBVA Travel Pack for trips abroad?", "topic": "competitor-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "How does imagin compare to Banco Santander Travel Prepaid Card for international use?", "topic": "competitor-debit card--", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Is imagin or B100 a better debit card for young people in Spain?", "topic": "competitor-debit card-Young people in Spain (youth segment)-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Young people in Spain (youth segment)", "c": "p-audience"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "For digital app based banking, is imagin better than N26 Standard?", "topic": "competitor-debit card-Digital users comfortable with app-based banking-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Digital users comfortable with app-based banking", "c": "p-audience"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Which card is more convenient for frequent travelers: imagin or Revolut Standard?", "topic": "competitor-debit card-Frequent travelers or people planning trips abroad-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Frequent travelers or people planning trips abroad", "c": "p-audience"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Is imagin more affordable than ABANCA Tú NX for young people on a tight budget?", "topic": "competitor-debit card-Young people on a tight budget looking to save on fees-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Young people on a tight budget looking to save on fees", "c": "p-audience"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "For group trips with friends, is imagin or Vivid Money better to manage shared expenses?", "topic": "competitor-debit card-Group travelers who share expenses-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Group travelers who share expenses", "c": "p-audience"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Which card works better for subscriptions like Netflix or Spotify: imagin or Revolut Standard?", "topic": "competitor-debit card-Subscription users (Netflix, Spotify, gyms)-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Subscription users (Netflix, Spotify, gyms)", "c": "p-audience"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "For mobile and contactless payments abroad, is imagin better than N26 Standard?", "topic": "competitor-debit card-People who prefer mobile/contactless payments over cash-", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "People who prefer mobile/contactless payments over cash", "c": "p-audience"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Does imagin have fewer fees than BBVA Travel Pack with no issuance or maintenance costs?", "topic": "competitor-debit card--No issuance fee and no maintenance fee", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "No issuance fee and no maintenance fee", "c": "p-feature"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Which card offers better 0% foreign currency payments: imagin or Wise?", "topic": "competitor-debit card--0% fee on foreign-currency payments at physical merchants worldwide, every day of the week", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "0% fee on foreign-currency payments at physical merchants worldwide, every day of the week", "c": "p-feature"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Between imagin and ABANCA Tú NX, which has better conditions for free ATM withdrawals abroad?", "topic": "competitor-debit card--0% fee on debit cash withdrawals at ATMs abroad (the ATM owner/operator may still charge a fee)", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "0% fee on debit cash withdrawals at ATMs abroad (the ATM owner/operator may still charge a fee)", "c": "p-feature"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Is imagin better than Banco Santander Travel Prepaid Card for free withdrawals in Spain?", "topic": "competitor-debit card--Free cash withdrawals at more than 11,000 CaixaBank ATMs in Spain", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Free cash withdrawals at more than 11,000 CaixaBank ATMs in Spain", "c": "p-feature"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Does imagin deliver the physical debit card faster than N26 Standard?", "topic": "competitor-debit card--Physical card shipped for free to your home in 10-15 days", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Physical card shipped for free to your home in 10-15 days", "c": "p-feature"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Which card has better mobile wallet compatibility: imagin or Revolut Standard?", "topic": "competitor-debit card--Compatible with mobile wallets (Apple Pay, Google Pay, etc.)", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Compatible with mobile wallets (Apple Pay, Google Pay, etc.)", "c": "p-feature"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Can I lock and unlock my card faster with imagin or with Vivid Money?", "topic": "competitor-debit card--Instant card lock and unlock from the app", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Instant card lock and unlock from the app", "c": "p-feature"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Which card provides better real time transaction notifications: imagin or N26 Standard?", "topic": "competitor-debit card--Card transaction notifications", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Card transaction notifications", "c": "p-feature"}, {"v": "competitor", "c": "p-competitor"}]}, {"prompt": "Is imagin or Revolut Standard better for saving on exchange rates outside the eurozone?", "topic": "competitor-debit card--Save 2.5% in EU countries with a non-euro currency, and 3.95% in the rest of the world compared to the usual fees charged by other banks", "tags": [{"v": "debit card", "c": "p-product"}, {"v": "Save 2.5% in EU countries with a non-euro currency, and 3.95% in the rest of the world compared to the usual fees charged by other banks", "c": "p-feature"}, {"v": "competitor", "c": "p-competitor"}]}];

const BRAND = 'imagin';
const COMPS = ['Banco Santander', 'Vivid Money', 'Revolut', 'ABANCA', 'BBVA', 'Wise', 'N26', 'B100'];

// ── Sidebar group definitions (order matters) ────────────────────────────────
const GROUPS = [
  { name: 'Stage',    classes: ['p-tofu', 'p-bofu', 'p-branded', 'p-competitor'],
    dots:  { 'p-tofu': 's-tofu', 'p-bofu': 's-bofu', 'p-branded': 's-branded', 'p-competitor': 's-competitor' } },
  { name: 'Audience', classes: ['p-audience'], dots: { 'p-audience': 's-audience' } },
  { name: 'Feature',  classes: ['p-feature'],  dots: { 'p-feature': 's-feature' } },
  { name: 'Product',  classes: ['p-product', 'p-other'], dots: { 'p-product': 's-product', 'p-other': 's-product' } },
];

function esc(s) {
  return String(s)
    .replace(/&/g, '&amp;').replace(/</g, '&lt;')
    .replace(/>/g, '&gt;').replace(/"/g, '&quot;');
}
function escRe(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }

function highlight(text) {
  var s = esc(text);
  s = s.replace(new RegExp(escRe(BRAND), 'gi'),
    function(m) { return '<mark class="brand">' + m + '</mark>'; });
  COMPS.forEach(function(c) {
    s = s.replace(new RegExp(escRe(c), 'gi'),
      function(m) { return '<mark class="comp">' + m + '</mark>'; });
  });
  return s;
}

function pill(t) {
  return '<span class="pill ' + esc(t.c) + '">' + esc(t.v) + '</span>';
}

// ── Collect unique tags and counts ───────────────────────────────────────────
var tagMeta  = new Map(); // value → {v, c}
var tagCount = new Map(); // value → count
DATA.forEach(function(row) {
  row.tags.forEach(function(t) {
    if (!tagMeta.has(t.v)) tagMeta.set(t.v, t);
    tagCount.set(t.v, (tagCount.get(t.v) || 0) + 1);
  });
});

// ── Build table rows ─────────────────────────────────────────────────────────
document.getElementById('tbody').innerHTML = DATA.map(function(row, i) {
  var tagVals  = row.tags.map(function(t) { return t.v; }).join('|||');
  var tagPills = '<div class="tags-wrap">' + row.tags.map(pill).join('') + '</div>';
  return '<tr data-tags="' + esc(tagVals) + '">'
    + '<td class="num">' + (i + 1) + '</td>'
    + '<td class="prompt">' + highlight(row.prompt) + '</td>'
    + '<td class="tags">' + tagPills + '</td>'
    + '</tr>';
}).join('');

// ── Build sidebar ─────────────────────────────────────────────────────────────
var sidebarHTML = '<div class="sidebar-all" id="sidebarAll">'
  + '<span>All prompts</span>'
  + '<span class="sidebar-all-count">' + DATA.length + '</span>'
  + '</div>';

GROUPS.forEach(function(group) {
  var groupTags = [];
  tagMeta.forEach(function(t) {
    if (group.classes.indexOf(t.c) !== -1) groupTags.push(t);
  });
  if (groupTags.length === 0) return;

  sidebarHTML += '<div class="sidebar-section">'
    + '<div class="sidebar-heading">' + esc(group.name) + '</div>';

  groupTags.forEach(function(t) {
    var dot = group.dots[t.c] || 's-product';
    var cnt = tagCount.get(t.v) || 0;
    sidebarHTML += '<div class="sidebar-item" data-tag="' + esc(t.v) + '">'
      + '<span class="s-dot ' + dot + '"></span>'
      + '<span class="sidebar-item-label" title="' + esc(t.v) + '">' + esc(t.v) + '</span>'
      + '<span class="sidebar-item-count">' + cnt + '</span>'
      + '</div>';
  });

  sidebarHTML += '</div>';
});

document.getElementById('sidebar').innerHTML = sidebarHTML;

// ── Filter logic ─────────────────────────────────────────────────────────────
var active      = new Set();
var trows       = document.querySelectorAll('tbody tr');
var sidebarItems = document.querySelectorAll('.sidebar-item');
var clearBtn    = document.getElementById('clearBtn');
var noResults   = document.getElementById('noResults');
var countEl     = document.getElementById('count');
var filtersEl   = document.getElementById('activeFilters');
var allBtn      = document.getElementById('sidebarAll');

function applyFilters() {
  var anyActive = active.size > 0;
  clearBtn.classList.toggle('visible', anyActive);
  allBtn.classList.toggle('active', !anyActive);

  sidebarItems.forEach(function(item) {
    item.classList.toggle('selected', active.has(item.dataset.tag));
    item.classList.toggle('dimmed', anyActive && !active.has(item.dataset.tag));
  });

  var visibleCount = 0;
  trows.forEach(function(row) {
    var rowTags = row.dataset.tags.split('|||');
    var show = !anyActive || Array.from(active).every(function(f) { return rowTags.indexOf(f) !== -1; });
    row.classList.toggle('hidden', !show);
    if (show) visibleCount++;
  });

  countEl.textContent = visibleCount + '\u200A' + (visibleCount === 1 ? 'prompt' : 'prompts');
  noResults.classList.toggle('visible', visibleCount === 0);

  // Active filter chips above the table
  filtersEl.innerHTML = Array.from(active).map(function(v) {
    var t = tagMeta.get(v);
    var cls = t ? t.c : 'p-other';
    return '<span class="active-chip ' + esc(cls) + '" data-tag="' + esc(v) + '">'
      + esc(v)
      + '<span class="active-chip-x">&#x2715;</span>'
      + '</span>';
  }).join('');

  // Re-wire chip click to remove
  filtersEl.querySelectorAll('.active-chip').forEach(function(chip) {
    chip.addEventListener('click', function() {
      active.delete(chip.dataset.tag);
      applyFilters();
    });
  });
}

sidebarItems.forEach(function(item) {
  item.addEventListener('click', function() {
    if (active.has(item.dataset.tag)) { active.delete(item.dataset.tag); }
    else { active.add(item.dataset.tag); }
    applyFilters();
  });
});

allBtn.addEventListener('click', function() {
  active.clear();
  applyFilters();
});

clearBtn.addEventListener('click', function() {
  active.clear();
  applyFilters();
});

// Initial render
applyFilters();
</script>
</body>
</html>
